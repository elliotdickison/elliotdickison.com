/*! elliotjam.es 2014-02-23 */
function toggleMenu(a){var b=document.getElementById("js-menu");b.className="show"==b.className?"":"show",a.preventDefault()}function enforceUrlFriendly(a,b,c){var d=getUrlFriendly(a.value,c);b.value!==d&&(b.value=d)}function getUrlFriendly(a,b){return a=a.toLowerCase().replace(/(')/g,"").replace(/([^a-z0-9])/g,"-").replace(/(--+)/g,"-"),("undefined"==typeof b||b)&&(a=a.replace(/^(-*)|(-*)$/g,"")),a}function setupHeader(){var a,b,c,d,e=$(window),f=e.width(),g=$(".js-cool-header"),h=g.find("nav");e.unbind("scroll"),h.css("position","absolute"),f>=840&&(a=g.outerHeight(),b=h.outerHeight(),c=-420*(f/1280),d=!1,g.css({"background-image":"url(/img/background2.jpg)","background-position":"50% "+c+"px"}),h.css("position","fixed"),e.bind("scroll",function(){var e=window.pageYOffset,f=1-e/(a-2*b);0>f&&!d?(h.hide(),d=!0):f>0&&d&&(h.show(),d=!1),a>e&&(f>0&&!d&&h.css("opacity",f),g.css("background-position","center "+(c+e/2)+"px"))}).trigger("scroll"))}function setupLinks(){$("a.js-ajax-replace").on("click",function(a){var b,c=$(this),d=c.attr("href"),e=$("<div />",{"class":c.attr("class")+" loading"}).html('<img src="/img/tomato.gif" alt="Look ma, a tomato!" />Look ma, a tomato!'),f=!0;setTimeout(function(){b&&e.replaceWith(b),f=!1},1e3),c.replaceWith(e),$.ajax({type:"GET",url:d}).done(function(a){b=a,f||e.replaceWith(b)}),a.preventDefault()}),$("a.js-close").on("click",function(a){$(this).parent().remove(),a.preventDefault()})}$(function(){var a;$(window).bind("resize",function(){clearTimeout(a),a=setTimeout(function(){setupHeader()},100)}).trigger("resize"),setupLinks()});