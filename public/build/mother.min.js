/*! elliotjam.es 2014-02-23 */
function toggleMenu(a){var b=document.getElementById("js-menu");b.className="show"==b.className?"":"show",a.preventDefault()}function enforceUrlFriendly(a,b,c){var d=getUrlFriendly(a.value,c);b.value!==d&&(b.value=d)}function getUrlFriendly(a,b){return a=a.toLowerCase().replace(/(')/g,"").replace(/([^a-z0-9])/g,"-").replace(/(--+)/g,"-"),("undefined"==typeof b||b)&&(a=a.replace(/^(-*)|(-*)$/g,"")),a}function setupHeader(){var a,b,c,d,e=$(window),f=e.width(),g=$(".js-cool-header"),h=g.find("nav");e.unbind("scroll"),h.css("position","absolute"),f>=840&&(a=g.outerHeight(),b=h.outerHeight(),c=-420*(f/1280),d=!1,g.css({"background-image":"url(/img/background2.jpg)","background-position":"50% "+c+"px"}),h.css("position","fixed"),e.bind("scroll",function(){var e=window.pageYOffset,f=1-e/(a-2*b);0>f&&!d?(h.hide(),d=!0):f>0&&d&&(h.show(),d=!1),a>e&&(f>0&&!d&&h.css("opacity",f),g.css("background-position","center "+(c+e/2)+"px"))}).trigger("scroll"))}function setupLinks(){$("a.js-ajax-replace").on("click",function(a){var b,c=$(this),d=c.attr("href"),e=$("<div />",{"class":c.attr("class")+" loading"}).html('<img src="/img/tomato.gif" alt="Look ma, a tomato!" />Look ma, a tomato!'),f=!0;setTimeout(function(){b&&e.replaceWith(b),f=!1},1e3),c.replaceWith(e),$.ajax({type:"GET",url:d}).done(function(a){b=a,f||e.replaceWith(b)}),a.preventDefault()}),$("a.js-close").on("click",function(a){$(this).parent().remove(),a.preventDefault()})}$(function(){var a;$(window).bind("resize",function(){clearTimeout(a),a=setTimeout(function(){setupHeader()},100)}).trigger("resize"),setupLinks()}),function(a){function b(){return 1==o?!1:void 0!=window.DeviceOrientationEvent}function c(a){if(x=a.gamma,y=a.beta,90===Math.abs(window.orientation)){var b=x;x=y,y=b}return window.orientation<0&&(x=-x,y=-y),m=null==m?x:m,n=null==n?y:n,{x:x-m,y:y-n}}function d(a){if(!((new Date).getTime()<g+f)){g=(new Date).getTime();var d=null!=i.offset()?i.offset().left:0,e=null!=i.offset()?i.offset().top:0,m=a.pageX-d,n=a.pageY-e;if(!(0>m||m>i.width()||0>n||n>i.height())){if(b()){if(void 0==a.gamma)return void(o=!0);values=c(a),m=values.x/j,n=values.y/j,m=l>m?l:m>k?k:m,n=l>n?l:n>k?k:n,m=(m+1)/2,n=(n+1)/2}var p,q,r=m/(1==b()?k:i.width()),s=n/(1==b()?k:i.height());for(q=h.length;q--;)p=h[q],newX=p.startX+p.inversionFactor*p.xRange*r,newY=p.startY+p.inversionFactor*p.yRange*s,p.background?p.obj.css("background-position",newX+"px "+newY+"px"):p.obj.css("left",newX).css("top",newY)}}}var e=25,f=1/e*1e3,g=(new Date).getTime(),h=[],i=a(window),j=30,k=1,l=-1,m=null,n=null,o=!1;a.fn.plaxify=function(b){return this.each(function(){for(var c=-1,d={xRange:a(this).data("xrange")||0,yRange:a(this).data("yrange")||0,invert:a(this).data("invert")||!1,background:a(this).data("background")||!1},e=0;e<h.length;e++)this===h[e].obj.get(0)&&(c=e);for(var f in b)0==d[f]&&(d[f]=b[f]);if(d.inversionFactor=d.invert?-1:1,d.obj=a(this),d.background){if(pos=(d.obj.css("background-position")||"0px 0px").split(/ /),2!=pos.length)return;if(x=pos[0].match(/^((-?\d+)\s*px|0+\s*%|left)$/),y=pos[1].match(/^((-?\d+)\s*px|0+\s*%|top)$/),!x||!y)return;d.originX=d.startX=x[2]||0,d.originY=d.startY=y[2]||0}else{var g=d.obj.position();d.obj.css({top:g.top,left:g.left,right:"",bottom:""}),d.originX=d.startX=g.left,d.originY=d.startY=g.top}d.startX-=d.inversionFactor*Math.floor(d.xRange/2),d.startY-=d.inversionFactor*Math.floor(d.yRange/2),c>=0?h.splice(c,1,d):h.push(d)})},a.plax={enable:function(c){c&&(c.activityTarget&&(i=c.activityTarget||a(window)),"number"==typeof c.gyroRange&&c.gyroRange>0&&(j=c.gyroRange)),a(document).bind("mousemove.plax",function(a){d(a)}),b()&&(window.ondeviceorientation=function(a){d(a)})},disable:function(b){if(a(document).unbind("mousemove.plax"),window.ondeviceorientation=void 0,b&&"boolean"==typeof b.restorePositions&&b.restorePositions)for(var c=h.length;c--;)layer=h[c],h[c].background?layer.obj.css("background-position",layer.originX+"px "+layer.originY+"px"):layer.obj.css("left",layer.originX).css("top",layer.originY);b&&"boolean"==typeof b.clearLayers&&b.clearLayers&&(h=[])}},"undefined"!=typeof ender&&a.ender(a.fn,!0)}(function(){return"undefined"!=typeof jQuery?jQuery:ender}()),window.matchMedia=window.matchMedia||function(a){"use strict";var b,c=a.documentElement,d=c.firstElementChild||c.firstChild,e=a.createElement("body"),f=a.createElement("div");return f.id="mq-test-1",f.style.cssText="position:absolute;top:-100em",e.style.background="none",e.appendChild(f),function(a){return f.innerHTML='&shy;<style media="'+a+'"> #mq-test-1 { width: 42px; }</style>',c.insertBefore(e,d),b=42===f.offsetWidth,c.removeChild(e),{matches:b,media:a}}}(document),function(a){"use strict";function b(){v(!0)}var c={};if(a.respond=c,c.update=function(){},c.mediaQueriesSupported=a.matchMedia&&a.matchMedia("only all").matches,!c.mediaQueriesSupported){var d,e,f,g=a.document,h=g.documentElement,i=[],j=[],k=[],l={},m=30,n=g.getElementsByTagName("head")[0]||h,o=g.getElementsByTagName("base")[0],p=n.getElementsByTagName("link"),q=[],r=function(){for(var b=0;p.length>b;b++){var c=p[b],d=c.href,e=c.media,f=c.rel&&"stylesheet"===c.rel.toLowerCase();d&&f&&!l[d]&&(c.styleSheet&&c.styleSheet.rawCssText?(t(c.styleSheet.rawCssText,d,e),l[d]=!0):(!/^([a-zA-Z:]*\/\/)/.test(d)&&!o||d.replace(RegExp.$1,"").split("/")[0]===a.location.host)&&q.push({href:d,media:e}))}s()},s=function(){if(q.length){var b=q.shift();w(b.href,function(c){t(c,b.href,b.media),l[b.href]=!0,a.setTimeout(function(){s()},0)})}},t=function(a,b,c){var d=a.match(/@media[^\{]+\{([^\{\}]*\{[^\}\{]*\})+/gi),e=d&&d.length||0;b=b.substring(0,b.lastIndexOf("/"));var f=function(a){return a.replace(/(url\()['"]?([^\/\)'"][^:\)'"]+)['"]?(\))/g,"$1"+b+"$2$3")},g=!e&&c;b.length&&(b+="/"),g&&(e=1);for(var h=0;e>h;h++){var k,l,m,n;g?(k=c,j.push(f(a))):(k=d[h].match(/@media *([^\{]+)\{([\S\s]+?)$/)&&RegExp.$1,j.push(RegExp.$2&&f(RegExp.$2))),m=k.split(","),n=m.length;for(var o=0;n>o;o++)l=m[o],i.push({media:l.split("(")[0].match(/(only\s+)?([a-zA-Z]+)\s?/)&&RegExp.$2||"all",rules:j.length-1,hasquery:l.indexOf("(")>-1,minw:l.match(/\(\s*min\-width\s*:\s*(\s*[0-9\.]+)(px|em)\s*\)/)&&parseFloat(RegExp.$1)+(RegExp.$2||""),maxw:l.match(/\(\s*max\-width\s*:\s*(\s*[0-9\.]+)(px|em)\s*\)/)&&parseFloat(RegExp.$1)+(RegExp.$2||"")})}v()},u=function(){var a,b=g.createElement("div"),c=g.body,d=!1;return b.style.cssText="position:absolute;font-size:1em;width:1em",c||(c=d=g.createElement("body"),c.style.background="none"),c.appendChild(b),h.insertBefore(c,h.firstChild),a=b.offsetWidth,d?h.removeChild(c):c.removeChild(b),a=f=parseFloat(a)},v=function(b){var c="clientWidth",l=h[c],o="CSS1Compat"===g.compatMode&&l||g.body[c]||l,q={},r=p[p.length-1],s=(new Date).getTime();if(b&&d&&m>s-d)return a.clearTimeout(e),void(e=a.setTimeout(v,m));d=s;for(var t in i)if(i.hasOwnProperty(t)){var w=i[t],x=w.minw,y=w.maxw,z=null===x,A=null===y,B="em";x&&(x=parseFloat(x)*(x.indexOf(B)>-1?f||u():1)),y&&(y=parseFloat(y)*(y.indexOf(B)>-1?f||u():1)),w.hasquery&&(z&&A||!(z||o>=x)||!(A||y>=o))||(q[w.media]||(q[w.media]=[]),q[w.media].push(j[w.rules]))}for(var C in k)k.hasOwnProperty(C)&&k[C]&&k[C].parentNode===n&&n.removeChild(k[C]);for(var D in q)if(q.hasOwnProperty(D)){var E=g.createElement("style"),F=q[D].join("\n");E.type="text/css",E.media=D,n.insertBefore(E,r.nextSibling),E.styleSheet?E.styleSheet.cssText=F:E.appendChild(g.createTextNode(F)),k.push(E)}},w=function(a,b){var c=x();c&&(c.open("GET",a,!0),c.onreadystatechange=function(){4!==c.readyState||200!==c.status&&304!==c.status||b(c.responseText)},4!==c.readyState&&c.send(null))},x=function(){var b=!1;try{b=new a.XMLHttpRequest}catch(c){b=new a.ActiveXObject("Microsoft.XMLHTTP")}return function(){return b}}();r(),c.update=r,a.addEventListener?a.addEventListener("resize",b,!1):a.attachEvent&&a.attachEvent("onresize",b)}}(this);