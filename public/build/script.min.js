/*! elliotjam.es 2014-05-14 */
function debounce(a,b,c){window.bouncing=window.bouncing||{},window.bouncing[a]&&(clearTimeout(window.bouncing[a]),delete window.bouncing[a]),window.bouncing[a]=setTimeout(c,b)}function toggleMenu(a){var b=document.getElementById("js-menu");b.className="show"==b.className?"":"show",a.preventDefault()}function enforceSlug(a,b,c){var d=getSlug(a.value,c);b.value!==d&&(b.value=d)}function getSlug(a,b){return a=a.toLowerCase().replace(/(')/g,"").replace(/([^a-z0-9])/g,"-").replace(/(--+)/g,"-"),("undefined"==typeof b||b)&&(a=a.replace(/^(-*)|(-*)$/g,"")),a}function setupLinks(){$("a.js-ajax-replace").on("click",function(a){var b,c=$(this),d=c.attr("href"),e=$("<div />",{"class":c.attr("class")+" loading"}).html('<img src="/img/tomato.gif" alt="Look ma, a tomato!" />Look ma, a tomato!'),f=!0;setTimeout(function(){b&&e.replaceWith(b),f=!1},1e3),c.replaceWith(e),$.ajax({type:"GET",url:d}).done(function(a){b=a,f||e.replaceWith(b)}),a.preventDefault()}),$("a.js-close").on("click",function(a){$(this).parent().remove(),a.preventDefault()})}function setupSearch(){$("input[type=search]").off("input").on("input",function(){var a=this.value;a?debounce("search",300,function(){search(a)}):(abortSearch(),search_xhr=$.ajax({url:"/blog",success:function(a){exitSearchMode(),$(".js-blog-content").replaceWith(a)}}))}),$(".js-clear-search").off("click").on("click",function(a){$(this).siblings("input[type=search]").val("").trigger("input"),a.preventDefault()})}function search(a){abortSearch(),search_xhr=$.ajax({url:"/blog/search",data:{q:a},success:function(a){enterSearchMode(),$(".js-blog-content").replaceWith(a)}})}function enterSearchMode(){$("body").addClass("searching")}function exitSearchMode(){$("body").removeClass("searching")}function abortSearch(){"undefined"!=typeof search_xhr&&search_xhr.abort&&(search_xhr.abort(),search_xhr=void 0),debounce("search",0,$.noop)}$(function(){setupLinks(),setupSearch()});