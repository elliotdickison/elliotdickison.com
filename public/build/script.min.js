/*! elliotjam.es 2014-03-24 */
function toggleMenu(a){var b=document.getElementById("js-menu");b.className="show"==b.className?"":"show",a.preventDefault()}function enforceUrlFriendly(a,b,c){var d=getUrlFriendly(a.value,c);b.value!==d&&(b.value=d)}function getUrlFriendly(a,b){return a=a.toLowerCase().replace(/(')/g,"").replace(/([^a-z0-9])/g,"-").replace(/(--+)/g,"-"),("undefined"==typeof b||b)&&(a=a.replace(/^(-*)|(-*)$/g,"")),a}function setupHeader(){var a,b,c=$(window),d=c.width(),e=$(".js-cool-header"),f=e.find("nav"),g=!1;c.unbind("scroll"),f.css({display:"block",opacity:"1",position:"absolute"}),d>=780&&(a=e.outerHeight(),b=f.outerHeight(),f.css("position","fixed").show(),c.bind("scroll",function(){var c=window.pageYOffset,d=1-c/(a-2*b);0>d&&!g?(f.hide(),g=!0):d>0&&g&&(f.show(),g=!1),a>c&&(d>0&&!g&&f.css("opacity",d),e.css("background-position","50% "+c/2+"px"))}).trigger("scroll"))}function setupLinks(){$("a.js-ajax-replace").on("click",function(a){var b,c=$(this),d=c.attr("href"),e=$("<div />",{"class":c.attr("class")+" loading"}).html('<img src="/img/tomato.gif" alt="Look ma, a tomato!" />Look ma, a tomato!'),f=!0;setTimeout(function(){b&&e.replaceWith(b),f=!1},1e3),c.replaceWith(e),$.ajax({type:"GET",url:d}).done(function(a){b=a,f||e.replaceWith(b)}),a.preventDefault()}),$("a.js-close").on("click",function(a){$(this).parent().remove(),a.preventDefault()})}function debounce(a,b,c){window.bouncing=window.bouncing||{},window.bouncing[a]&&(clearTimeout(window.bouncing[a]),delete window.bouncing[a]),window.bouncing[a]=setTimeout(c,b)}function setupSearch(){$("input[type=search]").off("input").on("input",function(){var a=this.value;a?debounce("search",300,function(){search(a)}):$.ajax({url:"/blog",success:function(a){exitSearchMode(),$(".js-blog-content").replaceWith(a)}})}),$(".js-clear-search").off("click").on("click",function(a){$(this).siblings("input[type=search]").val("").trigger("input"),a.preventDefault()})}function search(a){$.ajax({url:"/blog/search/"+encodeURIComponent(a.toLowerCase()),success:function(a){enterSearchMode(),$(".js-blog-content").replaceWith(a)}})}function enterSearchMode(){$("body").addClass("searching")}function exitSearchMode(){$("body").removeClass("searching")}$(function(){var a;$(window).bind("resize",function(){clearTimeout(a),a=setTimeout(function(){setupHeader()},100)}).trigger("resize"),setupLinks(),setupSearch()});